import{r as t,j as e,b,Y as S}from"./app-XYcvX45B.js";import{B as n,F as N,a as C,A as k,b as I}from"./AuthenticatedLayout-Dsx34QZr.js";import{M as F}from"./index-bbd4PJy1.js";import{S as A}from"./Skeleton-CtHg8bVf.js";import{F as l,I as u,a as R,S as D}from"./Table-DHwjyzK4.js";import{s as w}from"./index-BGnumeXB.js";import{M as E}from"./Modal-CcHNaMDl.js";import{P as T}from"./index-BfuchIVM.js";import"./useForceUpdate-D1UJB1O2.js";import"./transition-jrf8C8mD.js";function M({openEdit:d,setOpenEdit:m,selectedCategory:s={},setSelectedCategory:h,setDataSource:c}){const i=t.useRef(null),[p,g]=t.useState(!1),[f,x]=t.useState(!1),y=async r=>{r.id=s.id,await b.post(route("categorie.edit"),r).then(a=>{c(a.data.categories),i.current.resetFields(),w.success("Categoria Actualizada sucesso"),m(!1)}).catch(a=>{})},v=r=>new Promise(a=>setTimeout(a,r));return t.useEffect(()=>{d===!0&&(x(!0),v(700).then(()=>{x(!1)}))},[s]),e.jsx(e.Fragment,{children:e.jsx(F,{className:"bg-red-300 rounded shadow",title:e.jsxs("p",{className:" text-lg font-weight-bold",children:["⚠️ Editar usuario:  ",s==null?void 0:s.name,f]}),open:d,onCancel:()=>{var r;m(!1),(r=i.current)==null||r.resetFields(),h(null)},width:1e3,okButtonProps:{className:"bg-red-400",loading:p},okText:"Salvar alterações",styles:{body:{backgroundColor:"#f1f5f9",padding:20}},footer:null,children:f?e.jsx(A,{active:!0}):e.jsxs("div",{children:[e.jsxs(l,{className:"mx-8 px-lg-4 py-4",layout:"vertical",ref:i,onFinish:y,initialValues:s,children:[e.jsx(l.Item,{label:"Nome",name:"name",rules:[{required:!0,message:"Indique um nome valido"}],children:e.jsx(u,{allowClear:!0,name:"name",placeholder:"Um nome valido"})}),e.jsx(l.Item,{label:"Descricao",name:"descriptions",children:e.jsx(u.TextArea,{allowClear:!0})})]}),e.jsx(l.Item,{children:e.jsxs("div",{className:"flex justify-between px-8 py-4",children:[e.jsx(n,{icon:e.jsx(N,{}),onClick:()=>{m(!1)},children:"Fechar"}),e.jsx(n,{icon:e.jsx(C,{}),className:"bg-green-400 text-white",onClick:()=>{i.current.submit()},children:"EDITAR & SALVAR"})]})})]})},"edit_categorie")})}function G(d){const[m,s]=t.useState(!1);t.useState(!1);const[h,c]=t.useState(d.categories),i=t.useRef(null),[p,g]=t.useState(!1),[f,x]=t.useState({}),y=async a=>{await b.post(route("categorie.add.new"),a).then(o=>{c(o.data.categories),i.current.resetFields(),w.success("Categoria com sucesso")}).catch(o=>{})},v=async a=>{const o=h.filter(j=>j.id!=a);c(o),await b.delete(route("categorie.delete",{id:a})).then(j=>{c(j.data.categories),w.success("Removido")}).catch(j=>{})},r=[{title:"ID",dataIndex:"id",key:"id",render:a=>e.jsx("a",{children:a})},{title:"Name",dataIndex:"name",key:"name",render:a=>e.jsxs("a",{children:["👤 ",a]})},{title:"Descrição ",dataIndex:"descriptions",key:"descriptions"},{title:"Data de criacao",dataIndex:"created_at",key:"created_at"},{title:"Acção",key:"action",render:(a,o)=>e.jsxs(D,{size:"middle",className:"flex gap-1",children:[e.jsx(n,{type:"primary",icon:e.jsx(I,{}),onClick:()=>{g(!0),x(o)}}),e.jsx(T,{title:"Remover Categoria",description:"deseja remover?",onConfirm:()=>v(o.id),children:e.jsx(n,{type:"primary",className:"bg-red-400",children:"🗑️"})})]})}];return e.jsxs(k,{user:d.auth.user,page:"Categorias",header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Categorias"}),children:[e.jsx(S,{title:"Categorias"}),e.jsx("div",{className:"flex h-screen",children:e.jsx("div",{className:"w-full bg-gray-100 p-4 border border-left",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"mb-4 flex justify-between space-x-2",children:[e.jsx(n,{type:"primary",onClick:()=>s(!0),children:"Adicionar nova"}),e.jsx(u.Search,{type:"text",placeholder:"Buscar Categorias",className:"w-1/2",allowClear:!0})]}),e.jsx("div",{className:"flex-grow overflow-auto",children:e.jsx(R,{dataSource:h,columns:r,className:"shadow"})})]})})}),e.jsx("div",{children:e.jsxs(E,{show:m,closeable:!0,onClose:()=>{s(!1)},children:[e.jsx("p",{className:"px-8 py-4 font-bold text-lg",children:"Adicionar nova Categoria"}),e.jsxs(l,{className:"mx-8 px-lg-4 py-4",layout:"vertical",ref:i,onFinish:y,children:[e.jsx(l.Item,{label:"Nome",name:"name",rules:[{required:!0,message:"Indique um nome valido"}],children:e.jsx(u,{allowClear:!0,name:"name",placeholder:"Um nome valido"})}),e.jsx(l.Item,{label:"Descricao",name:"descriptions",children:e.jsx(u.TextArea,{allowClear:!0})})]}),e.jsx(l.Item,{children:e.jsxs("div",{className:"flex justify-between px-8 py-4",children:[e.jsx(n,{icon:e.jsx(N,{}),onClick:()=>{s(!1)},children:"Fechar"}),e.jsx(n,{icon:e.jsx(C,{}),className:"bg-green-400 text-white",onClick:()=>{i.current.submit()},children:"Salvar & Adiconar"})]})})]})}),e.jsx(M,{setDataSource:c,openEdit:p,setOpenEdit:g,selectedCategory:f,setSelectedCategory:x})]})}export{G as default};
