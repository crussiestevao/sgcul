import{r as u,j as e,b as I,Y as v}from"./app-XYcvX45B.js";import{M as N}from"./Modal-CcHNaMDl.js";import{B as p,F as P,a as k,A as S,b as A}from"./AuthenticatedLayout-Dsx34QZr.js";import{F as s,I as j,b as w,a as F,S as L}from"./Table-DHwjyzK4.js";import{s as C}from"./index-BGnumeXB.js";import{S as q}from"./Skeleton-CtHg8bVf.js";import{P as D}from"./index-BfuchIVM.js";import"./transition-jrf8C8mD.js";import"./useForceUpdate-D1UJB1O2.js";function E({open:a,setOpen:o,datasource:m,setDataSource:r,categories:i}){const c=u.useRef(null),f=async l=>{await I.post(route("product.add.new"),l).then(n=>{r(n.data.products),c.current.resetFields(),C.success("Producto Adiciona com sucesso")}).catch(n=>{})};return e.jsx(e.Fragment,{children:e.jsxs(N,{show:a,onClose:()=>o(!1),children:[e.jsx("p",{className:"px-8 py-4 font-bold text-lg",children:"Adicionar Novo Producto"}),e.jsxs(s,{className:"mx-8 px-lg-4 py-4",layout:"vertical",ref:c,onFinish:f,children:[e.jsx(s.Item,{label:"Nome do producto",name:"name",rules:[{required:!0,message:"Indique um nome"}],children:e.jsx(j,{allowClear:!0,placeholder:"nome do producto"})}),e.jsx(s.Item,{label:"Categoria",name:"categorie",rules:[{required:!0,message:"Indique uma categoria"}],children:e.jsx(w,{placeholder:"Categoria",children:i==null?void 0:i.map((l,n)=>e.jsx(w.Option,{value:l.id,children:l.name},n))})}),e.jsx(s.Item,{label:"Preço",name:"price",children:e.jsx(j,{allowClear:!0,placeholder:"nPreço"})}),e.jsx(s.Item,{label:"Descrição",name:"descriptions",children:e.jsx(j.TextArea,{allowClear:!0,placeholder:"Descrição"})}),e.jsx(s.Item,{children:e.jsxs("div",{className:"flex justify-between px-8 py-4",children:[e.jsx(p,{icon:e.jsx(P,{}),onClick:()=>{o(!1)},children:"Fechar"}),e.jsx(p,{icon:e.jsx(k,{}),className:"bg-green-400 text-white",onClick:()=>{c.current.submit()},children:"Salvar & Adiconar"})]})})]})]})})}function R({open:a,setOpen:o,setDataSource:m,categories:r,selectedProduct:i={}}){const c=u.useRef(null),[f,l]=u.useState(!1),n=async t=>{const d=r.find(x=>x.id===t.categorie||x.name===t.categorie);t.category=d.id,t.id=i.id,await I.post(route("product.update"),t).then(x=>{m(x.data),c.current.resetFields(),C.success("Producto Actualizado com sucesso")}).catch(x=>{})},b=t=>new Promise(d=>setTimeout(d,t));return u.useEffect(()=>{if(a===!0){l(!0);const t=r.find(d=>d.id===i.category_id);i.categorie=t.name,b(700).then(()=>{l(!1)})}},[a]),e.jsx(e.Fragment,{children:e.jsxs(N,{show:a,onClose:()=>o(!1),children:[e.jsx("p",{className:"px-8 py-4 font-bold text-lg",children:"Editar Producto"}),f?e.jsx(q,{active:!0}):e.jsxs(s,{className:"mx-8 px-lg-4 py-4",layout:"vertical",ref:c,onFinish:n,initialValues:i,children:[e.jsx(s.Item,{label:"Nome do producto",name:"name",rules:[{required:!0,message:"Indique um nome"}],children:e.jsx(j,{allowClear:!0,placeholder:"nome do producto"})}),e.jsx(s.Item,{label:"Categoria",name:"categorie",rules:[{required:!0,message:"Indique uma categoria"}],children:e.jsx(w,{placeholder:"Categoria",children:r==null?void 0:r.map((t,d)=>e.jsx(w.Option,{value:t.id,children:t.name},d))})}),e.jsx(s.Item,{label:"Preço",name:"price",children:e.jsx(j,{allowClear:!0,placeholder:"nPreço"})}),e.jsx(s.Item,{label:"Descrição",name:"descriptions",children:e.jsx(j.TextArea,{allowClear:!0,placeholder:"Descrição"})}),e.jsx(s.Item,{children:e.jsxs("div",{className:"flex justify-between px-8 py-4",children:[e.jsx(p,{icon:e.jsx(P,{}),onClick:()=>{o(!1)},children:"Fechar"}),e.jsx(p,{icon:e.jsx(k,{}),className:"bg-green-400 text-white",onClick:()=>{c.current.submit()},children:"Actualizar Info"})]})})]})]})})}function Y(a){const[o,m]=u.useState(a.products),[r,i]=u.useState(a.categories),[c,f]=u.useState(!1),[l,n]=u.useState(!1),[b,t]=u.useState(null),d=async h=>{const g=o.filter(y=>y.id!=h);m(g),await axios.delete(route("product.delete",{id:h})).then(y=>{m(y.data.categories),C.success("Removido")}).catch(y=>{})},x=[{title:"Codigo",dataIndex:"code",key:"code",render:h=>e.jsx("a",{children:h})},{title:"Nome",dataIndex:"name",key:"name",render:h=>e.jsxs("a",{children:[" ",e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"})]}),h]})},{title:"Descrição ",dataIndex:"descriptions",key:"descriptions"},{title:"Preço",dataIndex:"price",key:"price"},{title:"Data de criacao",dataIndex:"created_at",key:"created_at"},{title:"Acção",key:"action",render:(h,g)=>e.jsxs(L,{size:"middle",className:"flex gap-1",children:[e.jsx(p,{type:"primary",icon:e.jsx(A,{}),onClick:()=>{n(!0),t(g)}}),e.jsx(D,{title:"Remover Producto",description:"deseja remover?",onConfirm:()=>d(g.id),children:e.jsx(p,{type:"primary",className:"bg-red-400",children:"🗑️"})})]})}];return e.jsxs(S,{user:a.auth.user,page:"Lista de Produtos",header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Lista de Produtos"}),children:[e.jsx(v,{title:"Lista de Produtos"}),e.jsxs("div",{className:"h-screen",children:[e.jsxs("div",{className:"mb-4 flex justify-between space-x-2",children:[e.jsx(p,{type:"primary",onClick:()=>{f(!0)},children:"Adicionar No producto"}),e.jsx(j.Search,{type:"text",placeholder:"Buscar Produto",className:"w-1/2",allowClear:!0})]}),e.jsx(F,{dataSource:o,columns:x,className:"min-w-full bg-white rounded shadow"})]}),e.jsx(E,{categories:r,open:c,datasource:o,setDataSource:m,setOpen:f}),e.jsx(R,{open:l,setOpen:n,setDataSource:m,categories:r,selectedProduct:b})]})}export{Y as default};
